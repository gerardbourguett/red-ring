---
const { title } = Astro.props;
import Analytics from "@vercel/analytics/astro";
import SpeedInsights from "@vercel/speed-insights/astro";
---

<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="generator" content={Astro.generator} />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <title>#2025Live | {title}</title>

    <!-- Prevenir flash de modo incorrecto -->
    <script is:inline>
      const setTheme = () => {
        if (
          localStorage.theme === "dark" ||
          (!("theme" in localStorage) &&
            window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
      };
      setTheme(); // Ejecutar inmediatamente
      document.addEventListener("themeChanged", setTheme); // Escuchar cambios
    </script>
  </head>

  <body>
    <div
      class="min-h-screen bg-gradient-to-b from-white to-zinc-100 dark:from-black dark:to-zinc-900 text-zinc-900 dark:text-white antialiased transition-colors duration-300"
    >
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-4 md:py-8">
        <slot />
        <Analytics />
        <SpeedInsights />
      </div>
    </div>
  </body>

  <style is:global>
    :root {
      --background: 255 255 255;
      --foreground: 24 24 27;
    }

    .dark {
      --background: 0 0 0;
      --foreground: 255 255 255;
    }

    html {
      background-color: rgb(var(--background));
      scrollbar-gutter: stable;
      color-scheme: dark light;
      font-size: 16px; /* Base font size for better scaling */
    }

    html.dark {
      color-scheme: dark;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        "Helvetica Neue",
        Arial,
        "Noto Sans",
        sans-serif;
      font-size: 1rem;
      line-height: 1.5;
    }

    /* Estilos para la barra de desplazamiento */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgb(var(--background));
    }

    ::-webkit-scrollbar-thumb {
      background: rgb(var(--foreground) / 0.2);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgb(var(--foreground) / 0.3);
    }

    /* Transiciones suaves */
    * {
      transition-property: background-color, border-color, color, opacity;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 150ms;
    }

    /* Responsividad */
    @media (max-width: 768px) {
      html {
        font-size: 15px; /* Slightly smaller font on smaller screens */
      }

      body {
        padding: 0;
      }

      .container {
        padding: 0 1rem;
      }
    }
  </style>

  <script is:inline>
    const theme = (() => {
      if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
      ) {
        return localStorage.getItem("theme");
      }
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
      }
      return "light";
    })();

    if (theme === "light") {
      document.documentElement.classList.remove("dark");
    } else {
      document.documentElement.classList.add("dark");
    }

    window.localStorage.setItem("theme", theme);
  </script>
</html>
